<section xml:id="sets_counting_section"  xmlns:xi="http://www.w3.org/2001/XInclude">
<title>
Sets and Counting
</title>

<introduction>
  <p><em>Counting</em> refers to a set of techniques for determining
    relationships between the sizes of sets. Formally, we say
    that sets <m>S,T</m> have the same <em>size</em>,
    or <em>cardinality</em>, if there exists a one-to-one
    correspondence <m>S\leftrightarrow T</m>. We write <m>|S|</m> 
    to denote the number of elements in a finite set <m>S</m>.
  </p>
</introduction>

<subsection>
  <title>Addition Principle(s)</title>

  <p>Recall that two sets are disjoint if their intersection is
  empty. The most basic counting principle is the following.
  </p>

  <proposition>
    <title>Addition Principle</title>
<statement><p>    Let <m>A,B</m> be disjoint finite sets. We have
    <men> |A\cup B| = |A| + |B|.</men></p></statement>
  </proposition>

  <p>A collection of sets is called <em>pairwise disjoint</em>
    if every pair of distinct sets in the collection is disjoint.
    Recall that a partition of a set <m>S</m> is a collection of
    pairwise disjoint nonempty subsets of <m>S</m>
    whose union is all of <m>S</m>. Partitions are a natural context for
    the following generalization of the Addition Principle.
  </p>

  <proposition>
    <title>Addition Principle for Partitions</title>
<statement><p>    Let <m>S</m> be a finite set, and let <m>\mathcal{A}</m> be a
    partition of <m>S</m>. We have
    <men> |S| = \sum_{A\in \mathcal{A}} |A|.</men>
</p></statement>
  </proposition>

  <exercise>
    <p>Find all of the possible partitions of the set <m>\{a,b,c\}</m>.
    </p>
  </exercise>

</subsection>


<subsection><title>Multiplication Principle(s)</title>

  <p>Multiplication principles are based on the following bit of common
  sense. Suppose your job is to count the chairs in a large dining
  room. Suppose you see right away that the chairs are set around
    tables, and each table has <m>m</m>
     chairs. Do you now count all the chairs
    individually? Of course not. You count the tables: let's say there
    are <m>n</m> of them. Now you know the number of chairs
  is <m>mn</m>, without having counted the chairs one by one. Here is
  the mathematical version of this idea.
  </p>

    <proposition xml:id="partmultprin">
    <title>Multiplication Principle for Partitions</title>
    <statement><p>
	Suppose a finite set <m>S</m> is partitioned into <m>n</m>
	subsets, each of which has the same size <m>m</m>. Then
	<me>|S|=mn.</me>
      </p>
      </statement>
    </proposition>

<exercise>    <p>Use the addition principle for partitions to prove
    the multiplication rule for partitions.</p></exercise>

    <p><xref ref="partmultprin"/> provides a way to count the elements in
    a set using a sequence of <em>decisions</em>, or <em>choices</em>. If a set <m>S</m>
    is partitioned into subsets of equal size, we can choose an element
    of <m>S</m> as follows.
    <ol>
      <li>First, choose one of the partition subsets.</li>
      <li>Second, choose an element from that subset.</li>      
    </ol>
    Since there are <m>n</m> ways to make the first choice, and then,
    having made the first choice, there
    are <m>m</m> ways to make the second choice, then we conclude
    that <m>|S|=mn</m>.
    This thinking generalizes to longer choice sequences, as follows.
  </p>

  <proposition>
    <title>Multiplication Principle for a Sequence of Decisions</title>
<statement>    <p>Suppose that every element of a finite set <m>S</m> is uniquely
      specified by a sequence of <m>t</m>
      choices, such that there are <m>m_1</m>
      ways to make the first choice; then, having made the first choice,
      there are <m>m_2</m> ways to make the second choice (no matter how
      the first choice was made); and so on;
      finally, having made the <m>(t-1)</m>-st choice, there
      are <m>m_t</m> ways to make the <m>t</m>-th choice (no matter how
      the previous choices were made). Then we have
      <men>|S|=m_1m_2\cdots m_t.</men>
       </p>
  </statement>
  </proposition>

  <exercise>  <p>Use the multiplication principle to show that
      <m>|S\times T| = |S|\cdot |T|</m> for finite sets <m>S,T</m>.
    </p>
  </exercise>

  <p>As an application of the Multiplication Principle, we count the number of orderings of a finite
    set. Recall that a bijection is a function that is one-to-one and
    onto. An <em>ordering</em> or <em>permutation</em>
    of a finite set <m>A</m> of
    size <m>|A|=n</m> is given by a
    bijection <m>f\colon \{1,2,\ldots,n\}\to A</m>. We say the first
    element of <m>A</m> is <m>f(1)</m>, the second element
    is <m>f(2)</m>, and so on. We can specify an ordering of <m>A</m> by
    making the following sequence of choices.
    <ol>
      <li>First, choose a value for <m>f(1)</m>. There are <m>n</m> ways
      to make this choice.
      </li>
      <li>Second, choose a value for <m>f(2)</m>. There
	are <m>n-1</m> ways to make this choice from the elements
	in <m>A</m> that were not chosen in step 1.
      </li>
      <li>And so on, for <m>f(3),f(4),\ldots,f(n-1),f(n)</m>, for which
	there are <m>n-2,n-3,\ldots,2,1</m> ways to make each of these
	choices, repsectively.
      </li>      
    </ol>
    From this sequence of <m>n</m> choices, we conclude that the number
    of orderings of <m>A</m> is <m>n!= n(n-1)(n-2)\ldots 3\cdot 2\cdot
    1</m>. We record this result as a proposition.
  </p>

  <proposition xml:id="permfinsetformula">
    <title>Permutations of a finite set</title>
    <statement><p>Let <m>A</m> be a finite set. The number of permutations
	(or orderings) of the elements of <m>A</m> is <m>|A|!</m>.
      </p>
    </statement>
  </proposition>
  
</subsection>

<subsection>
  <title>Sequences and Permutations</title>
  
  <p>Let <m>S</m> be a set. A function <m>f\colon \{1,2,\ldots,r\}\to
      S</m> is called a <em>sequence</em> in <m>S</m> of
      length <m>r</m>. A sequence is denoted by an ordered
      list <m>(s_1,s_2,\ldots,s_r)</m> of elements in <m>S</m>,
      where <m>s_k=f(k)</m> for <m>1\leq k\leq r</m>.  The set of all
      possible sequences in <m>S</m> of length <m>r</m> is denoted
    <m>S^r</m>, and is also called the <m>r</m>-fold <em>Cartesian
      product</em> of <m>S</m> with itself.
    <men>S^r = \underbrace{S\times S \times \cdots \times S}_{r \text{
      factors}}=\{(s_1,s_2,\ldots,s_r)\colon s_k\in S\text{ for } 1\leq
      k\leq r\}</men>
    Elements of <m>S^r</m> are also
    called <em>ordered <m>r</m>-tuples</em>. It is convenient to have a
    name for the subset of sequences <m>f\colon \{1,2,\ldots,r\}\to
      S</m> that are one-to-one, which is the same as the set of 
    <m>n</m>-tuples <m>(s_1,s_2,\ldots,s_r)</m> that have no repeated
    values, that is, for
    which <m>s_i\neq s_j</m> for <m>i\neq j</m>. These sequences are
    called <em>permutations of <m>r</m> elements of <m>S</m></em>.
    We write <m>P_r(S)</m>
    to denote the set of sequences of length <m>r</m> in <m>S</m>
    that are
    one-to-one (the letter <m>P</m> is for <em>permutations</em>).
    <men>P_r(S) =\{(s_1,s_2,\ldots,s_r)\in S^r\colon s_i\neq
      s_j\text{ for }i\neq j\}</men>
  </p>

    <exercise><p>
      Let <m>S=\{x,y\}</m>.
      <ol>
	<li>Write out the elements of the set <m>S^3</m>.
	</li>
	<li>Write out the elements of the set <m>P_2(S)</m>.
	</li>
	<li>Write out the elements of the set <m>P_3(S)</m>.
	</li>	
	<li>Write out the elements of the set <m>\mathcal{P}(S)</m>.
	</li>
	<li>Write out the elements of the set <m>\mathcal{P}(P_2(S))</m>.
	</li>	
      </ol>
    </p>
  </exercise>

<p>    The following sequence counting formulas come from applications of
    the Multiplication Principle.
</p>

    <proposition>
      <title>Counting sequences</title>
      <statement>
	<p>Let <m>S</m> be a finite set. We have the following.
	  <mdn>
	    <mrow xml:id="cartprodsize">|S^r| = |S|^r</mrow>
	    <mrow xml:id="permnrformula">|P_r(S)| = |S|(|S|-1)(|S|-2)\cdots (|S|-r+1)=\frac{|S|!}{(|S|-r)!}</mrow>	    
	  </mdn>
	</p>
      </statement>
    </proposition>

    <p>The standard notation for the number of permutations of <m>r</m>
      elements from a set of size <m>n</m> is <m>P(n,r)</m>. The
      number <m>P(n,r)</m> is also called the <term>number
              of permutations of <m>n</m> items chosen <m>r</m> at a time
	    </term>
      In this
      notation, the formulas in <xref ref="permfinsetformula"/> and
      Equation <xref ref="permnrformula"/>, respectively,
      have the following forms.
      <mdn>
	<mrow>P(n,n) \amp = n!</mrow>
	<mrow xml:id="permnrformula1">P(n,r)\amp = n(n-1)(n-2)\cdots (n-r+1)=\frac{n!}{(n-r)!}
	</mrow>
      </mdn>
    </p>

    <exercise><statement><p>Use the multiplication principle to justify 
<xref ref="cartprodsize"/> and <xref ref="permnrformula"/>.
	</p>
      </statement>
    </exercise>
</subsection>

<subsection>
  <title>Subsets and Combinations</title>

    <p> Let <m>S</m> be a finite set, and let <m>r</m>
      be an integer in the range <m>0\leq r\leq |S|</m>. We will
      write <m>C_r(S)</m> to denote the set of
      all subsets of <m>S</m> of size <m>r</m>. The sets 
<m>C_r(S)</m> and <m>P_r(S)</m> are related: An element 
      of <m>P_r(S)</m> is specified by the following sequence of
      decisions.
      <ol>
	<li>First, choose an element <m>A</m>
	  of <m>C_r(S)</m>.
	</li>
	<li>Second, choose an ordering of <m>A</m>.
	</li>	
      </ol>
The sequence-of-choices version of the multiplication principle applies,
      and we have
      <men xml:id="cnrcountform1">|C_r(S)| \cdot r! = |P_r(S)|.</men>
      Putting this together with results in the previous subsections, we have the following.
            <men xml:id="cnrformula">|C_r(S)| =\frac{|S|!}{r! \;(|S|-r)!}.</men>
	    The number of subsets of size <m>r</m> in a set of
	    size <m>n</m> is denoted <m>C(n,r)</m>, and is also called the
	    <term>number of combinations of <m>n</m> items
	    chosen <m>r</m> at a time</term>. The usual mathematical
	    notation for the <m>C(n,r)</m>
	    is <m>{n \choose r}</m>. Using this notation,
<xref ref="cnrcountform1"/> and <xref ref="cnrformula"/>, respectively,
	    have the following forms.
	    <mdn>
	      <mrow xml:id="cnrcountform2">C(n,r) \cdot P(r,r) \amp = P(n,r)
	      </mrow>
	      <mrow xml:id="cnrformula1">C(n,r) \amp = {n\choose r} =
		\frac{n!}{r!(n-r)!}</mrow>
	    </mdn>
    </p>

    <exercise>
      <p>The <em>binomial formula</em> is the algebraic identity
	<men>(x+y)^n = \sum_{k=0}^n {n\choose k} x^ky^{n-k}.</men>
	Use counting principles to explain why this is true.
      </p>
    </exercise>

</subsection>

<subsection>
  <title>Infinite sets and sequences</title>
  <p>Recall that a function <m>f\colon \{1,2,3,\ldots\}\to S</m> from
    the natural numbers <m>\N=\{1,2,3,\ldots\}</m> to a set <m>S</m> is
    called a <em>sequence</em> in the set <m>S</m>.  A set <m>S</m> is
    called <em>countably infinite</em> if there exists a sequence
    in <m>S</m> that is one-to-one and onto.  An infinite set <m>S</m>
    is called <em>uncountably infinite</em> if <m>S</m> is not countably
    infinite.
  </p>

  <exercise><p>
      <ol>
	<li>      Give an example of a function <m>\N\to\N</m> that is
	  one-to-one and onto, and that is not the identity function.</li>
	<li>      Give an example of a function <m>\N\to\N</m> that is
	  one-to-one but not onto.</li>
	<li>      Give an example of a function <m>\N\to\N</m> that is
	  onto but not one-to-one.</li>
	<li>      Give an example of a function <m>\N\to\N</m> that is
    neither one-to-one nor onto, and that is not a constant
	  function.</li>
	<li>Let <m>S</m> be the set of all sequences in <m>\{0,1\}</m>.
	  Suppose that <m>f\colon \N\to S</m> is one-to-one and
	  onto. Define an element <m>s</m> of <m>S</m> by 
	  <me>s(n)=\begin{cases} 0 \amp \text{ if } (f(n))(n)=1\\
1 \amp \text{ if } (f(n))(n)=0
	    \end{cases}</me>.
	  Is it possible that <m>s</m> is in the image of <m>f</m>? What
	  do you conclude about <m>S</m>?
	</li>
</ol>
    </p>
  </exercise>
</subsection>


<exercises><title>Sets and Counting Exercises</title>

  <exercise><p>Work the <q>Sets and Counting</q>
      exercise set posted on Canvas.      </p>
  </exercise>

    </exercises>    

</section>
