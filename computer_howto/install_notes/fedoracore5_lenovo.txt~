			     Fedora Core 5
			  Lenovo laptop machine
				 8/2006
			     David W. Lyons
			     lyons@lvc.edu

Lenovo Thinkpad T60p

New installation Fedora Core 5

First try: installed fc5, ati graphics card driver (success), madwifi
wireless card driver (much frustration, then finally some success in the
form or working connection at LVC, but never a working connection at
home with Westell wireless DSL router), other packages.  Though this
installation was working, it had serious flaws of this nature: I would
have an eth0 or ath0 (wireless) connection up and running, then it would
cut out, or it would partly cut out in that there would still be an IP
address, ifconfig and iwconfig would report working connections, but
there was no functioning connection (web pages would not load, no ssh,
no ping, etc).  Also I experiences severe slow downs in bootup and
running.  A couple of times the computer was so confused it could not
even shut down.  The problems might have been due to our feverish
efforts to get wireless running.  We installed a lot of stuff and did
some system configuring, so it might be my fault.  In this charitable
vein, I am starting over with a fresh install, being careful to record
steps.  What follows are notes for the second install, beginning 8/17.

used 5 cd's burned by Oliver, checked and used once successfully

installed all packages (all but a few server things)

services: turn off sendmail

set the hostname: edit this file (as root)
/etc/sysconfig/network  
HOSTNAME=sharkbite.lvc.edu

display: monitor is not recognized by fc5, need to install driver

  get driver from ati

  https://support.ati.com/ics/support/default.asp?deptID=894&task=knowledge&folderID=27

  cd to the directory where the driver is
  su
  sh ./ati***.run
    click through the driver installation gui
  aticonfig --initial
  reboot
  System -> Preferences -> Screen Resolution 
    1152x684
    (max resolution makes the fonts too tiny to read)  
  better: aticonfig --resolution=0,1280x1024
  better still 8/31: aticonfig --resolution=0,1024x768

sound: it is necessary to push the volume slider pretty far up to hear
 the sample sound; check System -> Preferences -> Volume control, see if
 the speaker has a little red X, uncheck if it does

yumex
 % yum install yumex
 then run yumex &

###############################################################################
########################### wireless configuration ############################
###############################################################################

                                 (yikes!!)

Many thank-yous to Ken Yarnall for more than a few minutes of help, and
then for patiently reminding how to read instructions

0. install kernel source  (is this step necessary???)
     kernel-devel

1. install madwifi driver
     atrpms.net, instructions on http://atrpms.net/install.html

 a. as root, create a file called atrpms.repo in /etc/yum.repos.d with
    the following content:

[atrpms]
name=Fedora Core $releasever - $basearch - ATrpms
baseurl=http://dl.atrpms.net/fc$releasever-$basearch/atrpms/stable
gpgkey=http://ATrpms.net/RPM-GPG-KEY.atrpms
gpgcheck=1

 b. execute

    % rpm --import http://ATrpms.net/RPM-GPG-KEY.atrpms

    to get the digital signing key for atrpms so that the packages could be 
    verified

 c. execute 
    
    % yum --enablerepo=atrpms install madwifi

    or something like that (list madwifi* might be good first) I believe
    that the atrpms repository will then stay enabled until you issue a
    --disablerepo command

2. install other software
    pptpconfig from sourceforge
     http://pptpclient.sourceforge.net/
       http://pptpclient.sourceforge.net/howto-fedora-core-5.phtml

       # rpm -Uvh http://pptpclient.sourceforge.net/yum/stable/fc5/pptp-release-current.noarch.rpm
       # yum --enablerepo=pptp-stable install pptpconfig



3. edit several config files (as root)

/etc/wpa_supplicant/wpa_supplicant.conf  (make this readable only to root)

ctrl_interface=/var/run/wpa_supplicant
ctrl_interface_group=wheel

network={
	ssid="wpublic"
	scan_ssid=1
	key_mgmt=IEEE8021X
	eap=PEAP
	identity="usernamehere"
	password="passwdhere"
}
     
/etc/modprobe.conf

alias scsi_hostadapter ahci
alias eth0 e1000
alias ath0 ath_pci
alias snd-card-0 snd-hda-intel
options snd-card-0 index=0  
options snd-hda-intel index=0  
remove snd-hda-intel { /usr/sbin/alsactl store 0 >/dev/null 2>&1 || : ; }; /sbin/modprobe -r --ignore-remove snd-hda-intel

/etc/sysconfig/wpa_supplicant

# wlan0 and wifi0
# INTERFACES="-iwlan0 -iwifi0"
INTERFACES="-iath0"
# ndiswrapper and prism
# DRIVERS="-Dndiswrapper -Dprism"
DRIVERS="-Dmadwifi"

/etc/rc.d/rc.local

# add this line
/sbin/dhclient ath0

4. An alternative to step 3a is to run the software and use guis to do
   the configuring.

 a. run wpa_gui, configure as follows

    [8/18 note: for some reason, wpa_gui is not here, tried

    % yum update wpa_supplicant 

     did not help.  built it somehow, did make wpa_gui in some
     subdirectory of the wpa_supplicant files]

File menu
 Add Network (pops up dialog box)
  SSID wpublic
  Authentication IEEE 802.1X
  Encryption WEP
  PSK blank
  EAP method PEAP
  Identity usernamehere
  Password passwdhere

 b. (no longer necessary as of 8/25/2006)
    run pptpconfig, configure at follows

Server tab
 Name: LVC Wireless
 Server: 10.1.240.5
 Domain: lvc
 Username: usernamehere
 Password: passwdhere

Routing tab
 select All To Tunnel

DNS tab
 no change

Encryption tab
 select first option Require Microsoft etc (MPPE)

Miscellaneous tab
 select all three check boxes (Start tunnel ..., Reconnect ..., Enable
 ...)

5.  Bring up the connection.  as root

service wpa_supplicant start
(not needed if you edit rc.local as above) /sbin/dhclient
(optional as of 8/25/2006) pptpconfig

Wireless Notes: 

8/16 Even though this set up works, it has been flaky.  It cuts in and
out.  Sometimes ifconfig shows I have an IP address; iwconfig, pptpconfig and
wpa_gui show I have a connection, but I can't load web pages or ssh or
ping or anything, the connection is there but does not function.  I have
not been able to get a connection working at home with our linksys DSL router.

8/18 No connection yet for the second istall.  Driver seems installed
(shows up under Hardware tab for system-config-network), wpa_supplicant
starts up 

  # /sbin/service wpa_supplicant start

pptpconfig runs and says it is connected, but there is no IP address
shown by /sbin/ifconfig, web pages don't load, end.

8/24 Works! (at LVC, at least).  Ken filled in the missing piece, which
was to run dhclient.  Thanks again, Ken.

8/30 Works at home.  We are using Ken's d-link router.  We could never
get the verizon Westell Versalink to work.


###############################################################################
####################### end of wireless configuration notes ###################
###############################################################################

sylpheed   
  % yum install sylpheed
  make emacs the external editor
  set up LVC account

xmms       
  % yum install xmms
  not working for some reason, mp3 has crashed

abiword    
  % yum install abiword

gv         
  % yum install gv

fvwm
  tarball from fvwm.org

configure printers

migrate personal stuff
 ~/a and subdirectories
  ~/.scripts
 ~/bin
 /home/mdwoc
 .emacs
 .gnupg
 .gaim
 .apsell*
 .gnucash

copy over system stuff
 /etc/fstab

set up .bash_login
   put this line in ~/.bash_profile
source ~/.bash_login

disable the touchpad
  a. put these lines in /etc/X11/xorg.conf, delete the existing section
  for the synaptics touchpad

Section "InputDevice"
        Identifier      "Synaptics"
        Driver          "synaptics"
        Option          "SendCoreEvents"        "true"
        Option          "Device"                "/dev/input/mice"
        Option          "Protocol"              "auto-dev"
        Option          "HorizScrollDelta"      "0"
        Option          "SHMConfig"             "on"
EndSection

  b. execute this command
$ synclient TouchpadOff=1

  b'. automated version, put these lines in ~/.bash_login
# disable touchpad
synclient TouchpadOff=1

kalarm
  enter classes
  put these lines in .bash_login
# start kalarm, kalarmd
kdeinit
kalarmd

java (what a pain in the butt!)
  download the jre from java.com
  as root
    mkdir /usr/java
    put the jre....bin in /usr/java
    chmod 744 jre....bin
    jre....bin
    mv /usr/bin/java /usr/bin/java_old
    ln -s /usr/java/jre..../bin/java /usr/bin/java
      (likewise for javac, etc)
    ln -s /usr/java/jre1.5.0_06/plugin/i386/ns7/libjavaplugin_oji.so
      /usr/lib/mozilla/plugins/libjavaplugin_oji.so

mathematica 
  install from CD rom provided by IT services
  license server is lvc1.lvc.edu

============
   TO DO
============

emacs hangul stuff?
