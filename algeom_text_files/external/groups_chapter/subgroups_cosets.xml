  <section xml:id="subgroups_cosets_section">
    <title>Subgroups and cosets
    </title>	       

      <p>
	<definition xml:id="subgroupdefn">
      <title>Subgroups and cosets
      </title>
      <statement><p>
	<idx><h>subgroup</h></idx>	<idx><h>coset</h></idx>
	A subset <m>H</m> of a group <m>G</m> is called
	  a <term>subgroup</term> of <m>G</m> if <m>H</m> itself is a
	  group under the group operation of <m>G</m> restricted
	  to <m>H</m>. We write <m>H\leq
	  G</m> to indicate that <m>H</m> is a
	  subgroup of <m>G</m>. Given a subgroup <m>H</m> of <m>G</m>,
	  and given an element <m>g</m> in <m>G</m>,
	  the set 
	  	  <me>gH := \{gh \colon h\in H\}</me>
	  is called a <term>(left)
		    coset</term> of <m>H</m>.
	  The set of all cosets
	  of <m>H</m> is denoted <m>G/H</m>.
	  <me>G/H := \{gH\colon g\in G\}</me>
	</p>
      </statement>
	</definition>
	</p>

<exercise xml:id="dihedral_subgroup_reading_exercise">
	<statement><p>
	    Consider <m>D_4</m> as described in
	    <xref ref="dihedral-reading-exercise"/>.
	    <me>D_4=\{R_0,R_{1/4},R_{1/2},R_{3/4},F_H,F_V,F_D,F_{D'}\}</me>
	    <ol>
	      <li>Is the subset <m>\{R_0,R_{1/4},R_{1/2},R_{3/4}\}</m>
		of rotations a subgroup of <m>D_4</m>? Why or why
		not? </li>
	      	      <li>Is the subset <m>\{F_H,F_V,F_D,F_{D'}\}</m>
			of reflections a subgroup of <m>D_4</m>? Why or
			why not? </li>	      
	    </ol>
	</p></statement>
	<answer>
	  <ol>
	    <li>Yes. The composition of any two rotations
		is a rotation, and every rotation has an inverse that
		    is also a rotation.</li>
	    <li>No. Just observe
			that <m>F_H^2=R_0</m> is not a reflection. The
			  group operation on <m>D_4</m> does not
			    restrict properly to the subset of
			    reflections.</li>
	  </ol>
	</answer>
      </exercise>

<exercise><statement><p>Find <m>G/H</m> for <m>G=S_3</m>, <m>H=\{e,(12)\}</m>.
    </p>
  </statement>
  <answer><md>
      <mrow>G/H \amp =\{eH, (12)H, (13)H, (23)H, (123)H, (132)H\}</mrow>
      <mrow>\amp =
	\{\{e,(12)\},\{(12),e\},\{(13),(123)\},\{(23),(132)\},\{(13),(123)\},\{(132),(23)\}\}</mrow>
      <mrow>\amp = \{H,\{(13),(123)\},\{(23),(132)\}\}</mrow>
    </md>
  </answer>
</exercise>

<p>    <proposition xml:id="subgrouptests">
      <title>Subgroup tests</title><idx>two-step subgroup test</idx>
    <idx>one-step subgroup test</idx>
      <statement>
	<p>Let <m>H</m> be a subset of a group <m>G</m>. The
	  following are equivalent.
	  <ol marker="i">
	    <li><m>H</m> is a subgroup of <m>G</m>
	    </li>
	    <li><term>(2-step subgroup test)
	      </term> <m>H</m> is nonempty,
	      <m>ab</m> is in <m>H</m> for every <m>a,b</m>
	      in <m>H</m> (<m>H</m> is closed
		under the group operation), and 
	    <m>a^{-1}</m> is in <m>H</m> for every <m>a</m>
	    in <m>H</m> (<m>H</m> is closed
	      under group inversion)
	    </li>
	    <li><term>(1-step subgroup test)
	      </term> <m>H</m> is nonempty and 
	      <m>ab^{-1}</m> is in <m>H</m> for every <m>a,b</m>
	      in <m>H</m></li>
	  </ol>
	</p>
      </statement>
    </proposition>      
</p>

<p><proposition><title>Subgroup generated by a set of
    elements</title>
  <statement><p>Let <m>S</m> be a nonempty subset of a
      group <m>G</m>, and let <m>S^{-1}</m> denote the
      set <m>S^{-1}=\{s^{-1}\colon s\in S\}</m> of inverses of elements
      in <m>S</m>. We write <m>\langle S\rangle</m> to denote the set
<!--      <me>\langle S \rangle = \bigcup_{k=1}^\infty \{s_1s_2\cdots s_k \colon s_i\in S\cup
      S^{-1} \text{ for }1\leq i\leq k\}.</me>-->
      of all elements of <m>G</m> of the form
      <me>s_1s_2\cdots s_k</me>
      where <m>k</m> ranges over all positive integers and each <m>s_i</m> is 
      in <m>S\cup S^{-1}</m> for <m>1\leq i\leq k</m>. The
      set <m>\langle S\rangle</m> is a subgroup of <m>G</m>, called
      the <term>subgroup generated by the
	set <m>S</m></term><idx>subgroup generated by a set</idx>
      , and the elements of <m>S</m> are called
      the <term>generators</term><idx>generators of a (sub)group</idx>
      of <m>\langle S\rangle</m>.
    </p>
  </statement>
</proposition>
</p>

<p><alert>Comment on notational convention:</alert>
  If <m>S=\{s_1,s_2,\ldots,s_k\}</m> is finite, we write <m>\langle
	s_1,s_2,\ldots,s_k\rangle</m> for <m>\langle S\rangle</m>,
      instead of the more cumbersome <m>\langle \{s_1,s_2,\ldots,s_k\}\rangle</m>.
</p>

<p><observation><p>If <m>G</m> is a cyclic group with generator <m>g</m>,
    then <m>G=\langle g\rangle</m>.
  </p>
</observation>
</p>

<exercise xml:id="subgpgenbysetexer"><statement><p>Show that <m>\langle S\rangle</m> is indeed a
      subgroup of <m>G</m>. How would this fail if <m>S</m> were
      empty?</p>
  </statement>
</exercise>

<p><commentary component="instructor"><title>Instructor's solution for <xref ref="subgpgenbysetexer"/></title>
  <p>By construction, <m>\langle S\rangle</m> passes the 2-step subgroup
    test. If <m>S</m> were empty, then <m>\langle S\rangle</m> would be empty,
    so could not be a subgroup of <m>G</m>.
  </p>
</commentary>
</p>

<exercise xml:id="generators-reading-exer"><statement><p>
      <ol><li>Find <m>\langle F_H,F_V\rangle\subseteq D_4</m>.</li>
	<li>Find <m>\langle 6,8\rangle \subseteq \Z</m>.
	</li>
      </ol>
    </p>
  </statement>
  <answer><ol><li><m>\langle F_H,F_V\rangle=\{R_0,R_{1/2},F_H,F_V\}</m>
      </li>
      <li><m>\langle 6,8\rangle =\langle 2\rangle = 2\Z</m></li>
    </ol>
  </answer>
</exercise>

<commentary component="instructor"><title>Comments for the instructor on
    <xref ref="generators-reading-exer"/></title>
  <p>This is a great opportunity for classroom entertainment. Perform
    the party trick "George Washington does a flip" that
    illustrates <m>F_HF_V=R_{1/2}</m>. Hold up a dollar
    bill with George
    Washington facing the audience, right side up, right hand on one
    short edge and left hand on the other. Fold the top
    edge of the bill down, towards the audience. Now fold twice about a
    vertical midline. Now unfold about the vertical midline in such a
    way that you have accomplished <m>F_V</m>. Now unfold the long edge
    to finish <m>F_H</m>. Voila! George is facing the audience, upside down.
  </p>
</commentary>




<p>
      <proposition xml:id="cosetspartition">
	<title>Cosets as equivalence classes</title>
	<statement>
	  <p>Let <m>G</m> be a group and let <m>H</m> be a subgroup
	    of <m>G</m>. Let <m>\sim_H</m> be the relation on <m>G</m>
	    defined by <m>x\sim_H y</m> if and only if <m>x^{-1}y \in
	      H</m>. The relation <m>\sim_H</m> is an equivalence
	    relation on <m>G</m>, and the equivalence classes are the
	    cosets of <m>H</m>, that is, we have <m>G/\!\!\sim_H= G/H</m>.
	  </p>
	</statement>
      </proposition>
</p>

<p>      <corollary><title>Cosets as a partition</title>
	<statement><p>
	    	  Let <m>G</m> be a group and let <m>H</m> be a subgroup
		    of <m>G</m>. The set <m>G/H</m> of cosets
		    of <m>H</m> form a partition of <m>G</m>.
	  </p>
	</statement>
      </corollary>
</p>



    <exercises>
    <exercise xml:id="subgrouptestsexer">
      <statement>
	<p>
Prove <xref ref="subgrouptests"/>.
	</p>
      </statement>
    </exercise>

    <commentary component="instructor"><title>Instructor's solution for <xref ref="subgrouptestsexer"/>
	(proof of <xref ref="subgrouptests"/>)</title>
      <p>It is clear that (i) implies (ii) and (ii) implies (iii). Now
	suppose (iii) holds. Let <m>a</m> be an element
	of <m>H</m>. Then <m>aa^{-1}=e</m> is in <m>H</m>, and
	therefore <m>ea^{-1}=a^{-1}</m> is in <m>H</m>, and furthermore,
	<m>H</m> is closed under inversion. Now	let <m>a,b</m> be
	in <m>H</m>. Then <m>b^{-1}</m> is in <m>H</m>,
	so <m>a(b^{-1})^{-1}=ab</m> is in <m>H</m>. This shows that (i) holds.
      </p>
    </commentary>

    <exercise>
      <statement>
	<p>
		      Find all the subgroups
		      of <m>S_3</m>. 
	</p>
      </statement>
      <answer><p>In the "list of values" permutation notation of
	    <xref ref="permutation-reading-exercise"/>, the subgroups
	    of <m>S_3</m> are
	    <m>\{[1,2,3]\}</m>,
			  <m>\{[1,2,3],[2,1,3]\}</m>, <m>\{[1,2,3],[1,3,2]\}</m>,
			  <m>\{[1,2,3],[3,2,1]\}</m>,
			  <m>\{[1,2,3],[2,3,1],[3,1,2]\}</m>,
			  and <m>S_3</m>. In cycle notation, the
			  subgroups of <m>S_3</m> (in the same order)
			  are
			  <m>\{e\}</m>, <m>\{e,(12)\}</m>, <m>\{e,(23)\}</m>, <m>\{e,(13)\}</m>,
			  <m>\{e,(123),(132)\}</m>, <m>S_3</m>.
	</p>
		      </answer>
    </exercise>

    <exercise xml:id="d4cosetexer">
      <statement>
	<p>
		      Find all the cosets
		      of the subgroup <m>\{R_0,R_{1/2}\}</m> of  <m>D_4</m>.
	</p>
      </statement>
    </exercise>

    <commentary component="instructor"><title>Instructor's solution for <xref ref="d4cosetexer"/></title>
      <p>The cosets of <m>J=\{R_0,R_{1/2}\}</m> are
	<m>R_0J=R_{1/2}J=J</m>, <m>R_{1/4}J=R_{3/4}J=\{R_{1/4},R_{3/4}\}</m>, <m>F_HJ=F_VJ=\{F_H,F_V\}=</m>,
	and <m>F_DJ=F_{D'}J=\{F_D,F_{D'}\}</m>.
      </p>
    </commentary>

    <exercise xml:id="subgpsofzexer"><title>Subgroups of <m>\Z</m> and <m>\Z_n</m>
      </title>
	<statement><p><ol>
	      <li>Let <m>H</m> be a subgroup of <m>\Z</m>. Show that
		either <m>H=\{0\}</m> or <m>H=\langle d\rangle</m>,
		where <m>d</m> is the smallest positive element in <m>H</m>.
	      </li>
	      <li>Let <m>H</m> be a subgroup of <m>\Z_n</m>. Show that
		either <m>H=\{0\}</m> or <m>H=\langle d\rangle</m>,
		where <m>d</m> is the smallest positive element in <m>H</m>.
	      </li>	      
	      <li>Let <m>n_1,n_2,\ldots,n_r</m> be positive
		integers. Show that
		<me>\langle n_1,n_2,\ldots,n_r
		  \rangle = \langle \gcd(n_1,n_2,\ldots,n_r)\rangle.</me>
	      </li>
	    </ol>
	  </p>
	</statement>
		<hint><p>Suggestion for part (c): Do the case <m>r=2</m> first. </p>
		</hint>
		<statement>
	  <p><alert>Consequence of this exercise:</alert> The greatest
	  common divisor <m>\gcd(a,b)</m> of integers <m>a,b</m> is the
	  smallest positive integer of the form <m>sa+tb</m> over all
	  integers <m>s,t</m>. Two integers <m>a,b</m> are relatively
	  prime if and only if there exist integers <m>s,t</m> such that <m>sa+tb=1</m>.
	</p>
		</statement>
      </exercise>

      <commentary component="instructor"><title>Instructor's solution for
	  <xref ref="subgpsofzexer"/></title>
	<p>
	  <ol>
	    <li>Let <m>H</m> be a nontrivial subgroup of <m>\Z</m>, 
	      and let <m>d</m> be the smallest positive element
	      of <m>H</m> (because of closure under inverses, such
	      a <m>d</m> is guaranteed to exist). It is clear
	      that <m>H</m> contains all integer multiples of <m>d</m>.
	      Given any
	      element <m>a\in H</m>, use the division algorithm to
	      write <m>a=dq+r</m>, with <m>0\leq r\leq d-1</m>. We see
	      that <m>r=a-dq</m> is in <m>H</m>, so it must be that <m>r=0</m>.
	    </li>
	    <li>(The same proof in part 1 for <m>\Z</m> also works for <m>\Z_n</m>.)
	    </li>
	    <li>Let <m>d</m> be the smallest positive element
	      in <m>H=\langle n_1,\ldots,n_r\rangle</m>. By the previous
	      part, <m>H=\langle d\rangle</m>, so each <m>n_i</m> is a
	      multiple of <m>d</m>, i.e., <m>d</m> is a common divisor
	      of the <m>n_i</m>. Because every element of <m>H</m> is
	      a <m>\Z</m>-linear combination of the <m>n_i</m>, there must exist
	      integers <m>c_i</m> such
	      that <m>d=\sum_ic_in_i</m>. If <m>d'</m> is also a common
	      divisor of the <m>n_i</m>, then there exist
	      integers <m>k_i</m> such that <m>n_i=k_id'</m>. Then we
	      have
	      <m>d=\sum_i
	      c_i(k_id')=d'\sum_ic_ik_i</m>. Because <m>d,d'</m> are
	      both positive integers, it must be that <m>\sum_ic_ik_i</m>
	      is a positive integer, so we conclude that <m>d'\leq
	      d</m>. Thus we have proved that <m>d=\gcd(n_1,\ldots,n_r)</m>. 

	    </li>
	  </ol>
	</p>
      </commentary>
      
    
    <exercise xml:id="center">
      <title>Centralizers, Center of a group</title>
      <statement>
	<p>	      The <term>centralizer</term><idx>centralizer of
	a group element</idx>
	  <notation><usage><m>C(a)</m>
	    </usage><description>the centralizer of
	      an element <m>a</m> in a group <m>G</m>
	    </description></notation> of an element <m>a</m> in a
	      group <m>G</m>, denoted <m>C(a)</m>, is the set
	  <me>C(a) = \{g\in G\colon ag=ga\}.</me>
	  The <term>center</term><idx>center (of a
	    group)</idx>
	  <notation><usage><m>Z(G)</m>
	    </usage><description>the center of
	      a group <m>G</m>
	    </description>
	  </notation>
	  of a group <m>G</m>,
	  denoted <m>Z(G)</m>, is the set
	  <me>Z(G) = \{g\in G\colon ag=ga \;\; \forall a\in G\}.</me>
	  <ol>
	    <li>
	      Show that the centralizer <m>C(a)</m> of any
	      element <m>a</m> in a group <m>G</m> is a subgroup of <m>G</m>.
	    </li>
	    <li>Show that the center <m>Z(G)</m> of a group <m>G</m> is
	      a subgroup of <m>G</m>.
	    </li>
	  </ol>
	</p>
      </statement>
    </exercise>

    <commentary component="instructor"><title>Instructor's solution for <xref ref="center"/></title>
      <p><ol>
	  <li>First, observe that <m>C(a)</m> is not empty
	    because <m>e\in C(a)</m>.
	    Let <m>g,h</m> be elements of <m>C(a)</m>. We
	    have <me>(gh)(a)=g(ha)=g(ah)=(ga)h=(ag)h=a(gh)</me>
	    so <m>gh</m> is in <m>C(a)</m>. Multiplying <m>ag=ga</m> on
	    the right and left by <m>g^{-1}</m>, we
	    have <m>g^{-1}a=ag^{-1}</m>, so <m>g^{-1}</m> is
	    in <m>C(a)</m>. We conclude that <m>C(a)</m> is a subgroup
	    of <m>G</m> by the 2-step subgroup test.
	  </li>
	  <li>You can give an argument just like for the previous part,
	    with the quantifier "for all <m>a</m>". Alternatively,
	    you can prove that the intersection of subgroups is a
	    subgroup (this is "obvious"). Then simply note that
	    <me>Z(G) = \bigcap_{a\in G}C(a).</me>
	  </li>
	</ol>
      </p>
    </commentary>


    <exercise xml:id="orderofaneltexer"><title>The order of a group element</title>
      <statement><p>Let <m>g</m> be an element of a
	group <m>G</m>. The <term>order</term><idx>order of a group element</idx>
	of <m>g</m>,
	denoted <m>|g|</m>, is the smallest positive integer <m>n</m>
	such that <m>g^n=e</m>, if such an integer exists. If there is
	no positive integer <m>n</m> such that <m>g^n=e</m>,
	then <m>g</m> is said to have <em>infinite</em> order. Show
	that, if the order of <m>g</m> is finite, say <m>|g|=n</m>, then
	  <me>\langle g \rangle =
	    \{g^0,g^1,g^2,\ldots,g^{n-1}\}</me>.	</p>
	<p><alert>Consequence of this exercise:</alert> If <m>G</m> is
	  cyclic with generator <m>g</m>, then <m>|G|=|g|</m>.
	</p>
      </statement>
    </exercise>

    <commentary component="instructor"><title>Instructor's solution for <xref ref="orderofaneltexer"/></title>
      <p>The set on the right is contained in the set on the left by
	definition. To show containment in the other direction, let <m>g^k</m> be an element of <m>\langle g\rangle</m>. Use the division
	algorithm to write <m>k=qn+r</m> with <m>0\leq r\leq
	  n-1</m>. Then we have <me>g^k=g^{qn+r}= (g^{n})^qg^r=g^r.</me></p>
    </commentary>
    
    
    <exercise xml:id="cosetspartitionexer">
      <title>Cosets of a subgroup partition the group, Lagrange's Theorem</title>
      <statement>
	<p>
	    <ol>
	   <li>Prove <xref ref="cosetspartition"/>.</li> 
	    <li>Now suppose that a group <m>G</m> is finite. Show that all of
	      the cosets of a subgroup <m>H</m> have the same
	      size. 
	    </li>
	    <li>Prove Lagrange's Theorem, stated below.
	    </li>
	    </ol>
	</p>
	<p>
	      <assemblage>
		<title><term>Lagrange's Theorem</term>
		</title><idx>Lagrange's
		Theorem</idx> <p>If <m>G</m> is a finite group and <m>H</m>
	      is a subgroup, then the order of <m>H</m> divides the
		order of <m>G</m>.</p>
</assemblage>	    
	</p>
      </statement>
      <hint><p>For part (b), let <m>aH,bH</m> be
		cosets. Show that the function <m>aH\to bH</m> given
		  by <m>x\to ba^{-1}x</m> is a bijection.</p>
	      </hint>
    </exercise>      

    <commentary component="instructor"><title>Instructor's solution for <xref ref="cosetspartitionexer"/></title>
      <p>
	<ol>
	  <li>Proof of <xref ref="cosetspartition"/>. For reflexivity of
	  the 
	    relation <m>\sim_H</m>, we have
	    <m>x^{-1}x=e\in H</m>, so <m>x\sim_H x</m>.
	    For symmetry, suppose <m>x\sim_H y</m> so that  <m>x^{-1}y\in
	      H</m>. Since <m>H</m> is closed under taking inverses, we
	    have 
	    <m>(x^{-1}y)^{-1}=y^{-1}x\in
	      H</m>, so  <m>y\sim_H x</m>.
	    For transitivity, suppose <m>x\sim H y</m> and <m>y\sim_H
	      z</m>. Then <m>x^{-1}y</m> and <m>y^{-1}z</m> are
	    in <m>H</m>. Since <m>H</m> is closed under the group
	    operation, we have <m>x^{-1}yy^{-1}z=x^{-1}z\in H</m>,
	    so <m>x\sim_H z</m>. Next, we claim
	    that <m>[x]=xH</m>. If <m>x\sim_H y</m>,
	    then <m>x^{-1}y=h</m> for some <m>h\in H</m>,
	    so <m>y=xh\in xH</m>. This shows <m>[x]\subseteq xH</m>. 
	    Conversely, if <m>y\in xH</m>, then <m>y=xh</m> for
	    some <m>h\in H</m>, so <m>x^{-1}y=h\in H</m>. This
	      shows <m>xH\subseteq [x]</m>.
	  </li>
	  <li>Let <m>aH,bH</m> be
		cosets, and consider the function <m>aH\to bH</m> given
		  by <m>x\to ba^{-1}x</m>. It is clear that the
	    function <m>bH\to aH</m> given by <m>y\to ab^{-1}y</m> is
	    the inverse, so the cosets <m>aH,bH</m> are in bijective
		correspondence, and therefore have the same size.
	  </li>
	  <li>By the previous parts, all the cosets of <m>H</m> have the
	    same size, and also form a partition. So the size
	    of <m>G</m> is the size of <m>H</m> times the number of
	    cosets of <m>H</m>.
	  </li>
	</ol>
      </p>
    </commentary>
    
    <exercise xml:id="lagrangeconseqexer"><title>Consequences of Lagrange's Theorem</title>
      <statement>
	<p><ol>
	    <li>Show that the order of any element of a finite group
	      divides the order of the group.</li>
	    <li>Let <m>G</m> be a finite group, and let <m>g\in
		G</m>. Show that <m>g^{|G|}=e</m>.
	    </li>
	    <li>Show that a group of prime order is cyclic.</li>
	  </ol>
	</p>
      </statement>
    </exercise>

    <commentary component="instructor"><title>Instructor's solution for
	<xref ref="lagrangeconseqexer"/></title>
	      <p><ol>
		  <li>Apply Lagrange's theorem to the
		  subgroup <m>H=\langle g\rangle</m>, and use the fact
		    that <m>|g|=|\langle g\rangle|</m> (<xref ref="orderofaneltexer"/>).
		  </li>
		  <li>By the previous part, we have <m>|G|=|g|k</m> for
		    some integer <m>k</m>. So <me>g^{|G|}=g^{|g|k}=(g^{|g|})^k=e^k=e.</me>
		  </li>
		  <li>Let <m>p=|G|</m>.
		    By part 1, the order of any element in <m>G</m>
		    must divide <m>p</m>, and since <m>p</m> is prime,
		    the order of any element in <m>G</m> must be 1
		    or <m>p</m>. The identity is the only element of
		    order 1, so the rest of the elements in <m>G</m> are
		    all generators, and <m>G</m> is cyclic.
		  </li>
		</ol>
	      </p>
    </commentary>
    
  </exercises>

    </section>
