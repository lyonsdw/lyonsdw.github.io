#### Makefile for seemore ####

#### Backup files
BACKUP_FILES = $(HEADERS) $(LIBSRCS) $(PROGSRCS) $(SYSMAKEFILES) $(MISCFILES)
BACKUP_LIST  = $(ROOTDIR)/backup_file.list


#### Variables
CC = g++
DEPEND_FILE  = depend.mk
SYSMAKEFILES =
MISCFILES    =


#### Includes
HOMEDIR = /home/lyons/hopf
ROOTDIR    = $(HOME)
INSTALLDIR = $(ROOTDIR)
LCALINCDIR = /usr/local/include
LCALLIBDIR = /usr/local/lib
MYINCDS    = -I./ -I$(LCALINCDIR)
INCLUDES   = $(MYINCDS)


#### Flags
CCFLAGS    = -g


#### Libraries
GLUTLIB = -L$(LCALLIBDIR) -lglut
GLLIBS  = -lMesaGL -lMesaGLU
XLIBS   = -L/usr/X11R6/lib -lXext -lXmu -lX11
MYLIBS =
LIBS   = $(GLUTLIB) $(GLLIBS) $(XLIBS) -lm


#### Linker Flags
LDWARNOFF  =
LDFLAGS    =


#### Sources and Objects
LIBSRCS = fiber_cbks.cc sphere_cbks.cc
LIBOBJS = $(LIBSRCS:.cc=.o)


#### Headers
HEADERS = fiber_cbks.h sphere_cbks.h


#### Library
LIBRARY =


#### Programs
PROGSRCS = glut_hopf.cc
PROGOBJS = $(PROGSRCS:.cc=.o)
PROGS     = glut_hopf


#### Rules
.SUFFIXES: .cc
.cc.o:
	$(CC) $(CCFLAGS) $(CCWARNOFF) \
$(INCLUDES) \
-c $<


optimized:
	make realclean
	make depend
	make optimized_lib
	make optimized_progs



optimized_progs:
	$(CC) -O2 -mips2 $(CCWARNOFF) \
$(INCLUDES) \
-c $(PROGSRCS)
	make glut_hopf


optimized_lib:
	$(CC) -O2 -mips2 $(CCWARNOFF) \
$(INCLUDES) \
-c $(LIBSRCS)
	make $(LIBOBJS)


#### Program creation rules
glut_hopf: glut_hopf.o $(LIBOBJS) Makefile
	$(CC) $(LDFLAGS) -o glut_hopf glut_hopf.o $(LIBOBJS) $(LIBS)



#### Dependency rules



#### Clean up rules
clean:
	-rm -f $(LIBOBJS)
	-rm -f $(LIBRARY)
	-rm -f *~


realclean: clean
	-rm -f $(PROGS)
	-rm -f *.o
	-rm -f $(DEPEND_FILE)
	touch $(DEPEND_FILE)
	-rm -f *bak
